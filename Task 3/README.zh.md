# Task 3
中文 | [英文](README.md)

将简单的表达式转换为伪 x86-64 汇编代码。

需要转化的 C 代码（*原函数*）是：

1. 一个有三个参数的函数（所有参数与变量均为 64 位有符号整数）。
2. 40 个局部变量（都被使用过）。
3. 60 个简单的赋值表达式语句，均为 `X = Y op Z` 的形式：
    * `X` 与 `Y` 均为局部变量。
    * `Z` 为局部变量、参数或常数。
    * 运算符 `op` 为 `+`、`-`、`*` 或 `/`。

你生成的伪汇编代码是（以 C 代码的形式，*生成的函数*）：

1. 与*原函数*形式相同的 C 函数。
2. 你可以使用最多 16 个局部变量（表示 16 个寄存器）。
3. 你可以使用一个大数组（表示内存）。
4. 所有语句均为 `X op Y` 的形式：
    * 如果 `X` 为局部变量（寄存器），则 `Y` 可以为局部变量（寄存器）、数组成员（内存）或常数（立即数）。
    * 如果 `X` 为数组成员（内存），则 `Y` 仅可以为局部变量（寄存器）或常数（寄存器）。
    * 运算符 `op` 为 `+=`、`-=`、`*=`、`/=` 或 `=`。

你需要优化你*生成的函数*，以减小：

* 访问数组（内存）与局部变量（寄存器）的次数。
* 使用的不同的局部变量（使用的寄存器的数量）。
* 使用的数组中不同元素的数量（使用的内存大小）。

你需要从测试数据中读取*原函数*的代码。其参数为 `a1`、`a2` 和 `a3`，局部变量为 `x1` 到 `x40`，每一行包含一个语句，开头无空白字符，以一个 `;` 结尾。运算符与运算数直接以一个空格隔开。例如：

```c
x1 = a1 + 100;
x2 = x1 * 70;
x3 = x1 / x2;
x4 = x3 - x1;
```

要检查你*生成的函数*的正确性，编译*原函数*与你*生成的函数*并以一些相同的随机参数运行。


# 截止日期
你的 Pull Request 需要在 2019 年 10 月 28 日 23:00（中国标准时间）前被创建。
